(function(e){function t(t){for(var n,a,s=t[0],i=t[1],u=t[2],d=0,l=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&l.push(o[a][0]),o[a]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);g&&g(t);while(l.length)l.shift()();return c.push.apply(c,u||[]),r()}function r(){for(var e,t=0;t<c.length;t++){for(var r=c[t],n=!0,a=1;a<r.length;a++){var s=r[a];0!==o[s]&&(n=!1)}n&&(c.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={app:0},o={app:0},c=[];function s(e){return i.p+"js/"+({}[e]||e)+".js"}function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],r={"chunk-1abc2cbf":1,"chunk-3d1381e6":1,"chunk-451c425b":1,"chunk-4a94bde6":1,"chunk-2cbb8e3e":1,"chunk-52cc35c2":1,"chunk-7733ba60":1,"chunk-77750fe2":1,"chunk-7a04faaf":1,"chunk-7eb6fefa":1,"chunk-aa651ef2":1};a[e]?t.push(a[e]):0!==a[e]&&r[e]&&t.push(a[e]=new Promise((function(t,r){for(var n="css/"+({}[e]||e)+".css",o=i.p+n,c=document.getElementsByTagName("link"),s=0;s<c.length;s++){var u=c[s],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===n||d===o))return t()}var l=document.getElementsByTagName("style");for(s=0;s<l.length;s++){u=l[s],d=u.getAttribute("data-href");if(d===n||d===o)return t()}var g=document.createElement("link");g.rel="stylesheet",g.type="text/css",g.onload=t,g.onerror=function(t){var n=t&&t.target&&t.target.src||o,c=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=n,delete a[e],g.parentNode.removeChild(g),r(c)},g.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(g)})).then((function(){a[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var c=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=c);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,i.nc&&d.setAttribute("nonce",i.nc),d.src=s(e);var l=new Error;u=function(t){d.onerror=d.onload=null,clearTimeout(g);var r=o[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",l.name="ChunkLoadError",l.type=n,l.request=a,r[1](l)}o[e]=void 0}};var g=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var g=d;c.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"09ce":function(e,t,r){},"1f6c":function(e,t,r){"use strict";var n=r("7a23"),a=Object(n["h"])("span",{class:"burger__item"},null,-1),o=Object(n["h"])("span",{class:"burger__item"},null,-1),c=Object(n["h"])("span",{class:"burger__item"},null,-1),s=[a,o,c];function i(e,t,r,a,o,c){return Object(n["z"])(),Object(n["g"])("div",{class:Object(n["q"])(["burger",{active:e.burgerIsActive,hover:e.hover}]),onMouseover:t[0]||(t[0]=function(){return c.mouseover&&c.mouseover.apply(c,arguments)}),onMouseout:t[1]||(t[1]=function(){return c.mouseout&&c.mouseout.apply(c,arguments)}),onClick:t[2]||(t[2]=function(t){return e.toggleBurger(!e.burgerIsActive)})},s,34)}var u=r("5530"),d=r("5502"),l={props:{},data:function(){return{
//! isActive: false, // не для vuex
hover:!1}},computed:Object(u["a"])({},Object(d["c"])("anyParams",{burgerIsActive:"burgerIsActive"})),methods:Object(u["a"])(Object(u["a"])({},Object(d["b"])("anyParams",["toggleBurger"])),{},{mouseover:function(){this.hover=!0},mouseout:function(){this.hover=!1}})},g=(r("63ae"),r("6b0d")),p=r.n(g);const f=p()(l,[["render",i]]);t["a"]=f},2110:function(e,t,r){"use strict";r("f0fe")},"35fc":function(e,t,r){},"3df4":function(e,t,r){"use strict";r("afd7")},"4c72":function(e,t,r){"use strict";(function(e){var n=r("5530"),a=(r("4de4"),r("d3b7"),r("5502")),o=r("bb7e");t["a"]={props:{},components:{Spoiler:o["a"]},data:function(){return{}},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(a["c"])("anyParams",{burgerIsActive:"burgerIsActive"})),Object(a["c"])("anyParams",{headerHeight:"headerHeight"})),Object(a["c"])("category",{categories:"categories"})),{},{getHeight:function(){return e.client?document.documentElement.clientHeight-this.headerHeigh:70},navCategory:function(){return this.categories.filter((function(e){return"Для сада"===e.category_name||"Комнатные"===e.category_name||"Орхидеи"===e.category_name||"Розы"===e.category_name||"Луковичные"===e.category_name||"Саженцы"===e.category_name}))}}),methods:Object(n["a"])({},Object(a["b"])("anyParams",["toggleBurger"]))}}).call(this,r("4362"))},"4cb5":function(e,t,r){"use strict";r("e4fa")},"4cd1":function(e,t,r){"use strict";r("35fc")},5551:function(e,t,r){"use strict";r("ac1f"),r("841c");var n=r("7a23"),a=["onKeydown"],o=["value"];function c(e,t,r,c,s,i){var u=Object(n["H"])("router-link");return Object(n["z"])(),Object(n["e"])(n["b"],{name:"height-search"},{default:Object(n["Q"])((function(){return[e.searchIsActive||e.minWidth[e.minWidthParams.md2]?(Object(n["z"])(),Object(n["g"])("form",{key:0,onKeydown:Object(n["S"])(Object(n["T"])((function(e){return!1}),["prevent"]),["enter"]),class:"search"},[Object(n["k"])(u,{to:{name:"search",params:{search:e.search}}},{default:Object(n["Q"])((function(){return[Object(n["h"])("span",{class:"search__icon font-icon icon-font__search anim-icon--search",onClick:t[0]||(t[0]=function(){return e.goSearch&&e.goSearch.apply(e,arguments)})})]})),_:1},8,["to"]),Object(n["h"])("input",{type:"search",class:"search__input auxiliary",placeholder:"Поиск по товарам...",onInput:t[1]||(t[1]=function(){return e.inputSearch&&e.inputSearch.apply(e,arguments)}),value:i.valueSearch},null,40,o),Object(n["R"])(Object(n["h"])("span",{onClick:t[2]||(t[2]=function(){return i.clear&&i.clear.apply(i,arguments)}),class:"search__clear"},null,512),[[n["O"]," "!==e.search]])],40,a)):Object(n["f"])("",!0)]})),_:1})}var s=r("5530"),i=r("5502"),u={data:function(){return{awaitSearch:!1}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(i["c"])("anyParams",{searchIsActive:"searchIsActive"})),Object(i["c"])("filter",{search:"search"})),Object(i["c"])("anyParams",{minWidthParams:"minWidthParams"})),Object(i["c"])("anyParams",{minWidth:"minWidth"})),{},{valueSearch:function(){return" "===this.search?"":this.search;//! заглушка для заглушки, читать в склад/фильтер или склад/поиск (при байинднге с роутером возникала ошибка, небольшая заглушка)
}}),methods:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(i["b"])("filter",{inputSearch:"inputSearch",setSearchData:"setSearchData",goSearch:"goSearch"})),Object(i["b"])("product",{getByName:"getByName"})),{},{clear:function(){this.inputSearch(!1),this.setSearchData([])}})},d=(r("3df4"),r("6b0d")),l=r.n(d);const g=l()(u,[["render",c]]);t["a"]=g},"569e":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23"),a={class:"page"};function o(e,t,r,o,c,s){var i=Object(n["H"])("flower-header"),u=Object(n["H"])("router-view"),d=Object(n["H"])("alert"),l=Object(n["H"])("flower-footer");return Object(n["z"])(),Object(n["g"])(n["a"],null,[Object(n["h"])("div",a,[Object(n["k"])(i),Object(n["k"])(u,null,{default:Object(n["Q"])((function(e){var t=e.Component;return[Object(n["k"])(n["b"],{name:"anim-page",mode:"out-in"},{default:Object(n["Q"])((function(){return[(Object(n["z"])(),Object(n["e"])(Object(n["J"])(t)))]})),_:2},1024)]})),_:1}),Object(n["k"])(d)]),Object(n["k"])(l)],64)}var c=r("5530"),s=(r("07ac"),r("78a7"),r("5502")),i={class:"alert text"},u=Object(n["j"])("перейти");function d(e,t,r,a,o,c){var s=Object(n["H"])("router-link");return Object(n["z"])(),Object(n["g"])("div",i,[(Object(n["z"])(!0),Object(n["g"])(n["a"],null,Object(n["F"])(e.messages,(function(e){return Object(n["z"])(),Object(n["g"])("div",{class:"alert__text",key:e.id},[Object(n["j"])(Object(n["L"])(e.text)+" ",1),(e.type="autorize")?(Object(n["z"])(),Object(n["e"])(s,{key:0,to:{name:"login"}},{default:Object(n["Q"])((function(){return[u]})),_:1})):Object(n["f"])("",!0)])})),128))])}var l={props:{id:{}},computed:Object(c["a"])({},Object(s["c"])("alerts",{messages:"messages"})),methods:{}},g=(r("d87c"),r("6b0d")),p=r.n(g);const f=p()(l,[["render",d]]);var h=f,m={class:"footer"},b={class:"content-width"},v={class:"footer__body"},y={class:"footer__spoiler"},k=Object(n["h"])("ul",{class:"footer__links text2"},[Object(n["h"])("li",{class:"footer__link"},[Object(n["h"])("a",{href:""},"О нас")]),Object(n["h"])("li",{class:"footer__link"},[Object(n["h"])("a",{href:""},"Контакты")]),Object(n["h"])("a",{href:""}),Object(n["h"])("li",{class:"footer__link"},[Object(n["h"])("a",{href:""},"Режим работы")])],-1),O={class:"footer__spoiler"},j=Object(n["h"])("ul",{class:"footer__links text2"},[Object(n["h"])("li",{class:"footer__link"},[Object(n["h"])("a",{href:""},"Способы оплаты")]),Object(n["h"])("li",{class:"footer__link"},[Object(n["h"])("a",{href:""},"Доставка")]),Object(n["h"])("li",{class:"footer__link"},[Object(n["h"])("a",{href:""},"Возврат товаров")]),Object(n["h"])("li",{class:"footer__link"},[Object(n["h"])("a",{href:""},"Возврат средств")])],-1),x={class:"footer__spoiler"},w=Object(n["h"])("ul",{class:"footer__links footer__links--row text2"},[Object(n["h"])("li",{class:"footer__link"},[Object(n["h"])("a",{class:"icon-font__whatsapp font-icon",href:""})]),Object(n["h"])("li",{class:"footer__link"},[Object(n["h"])("a",{class:"icon-font__insta font-icon",href:""})]),Object(n["h"])("li",{class:"footer__link"},[Object(n["h"])("a",{class:"icon-font__vk font-icon",href:""})])],-1),P={class:"footer__footer"},_={class:"footer__map subtitle icon-font__map"},I=Object(n["i"])('<div class="footer__copyrights auxiliary--white"> 2021 © Защищены ли все права?) </div><div class="footer__payment"><span class="icon-font__visa footer__icon font-icon"></span><span class="icon-font__mastercard footer__icon font-icon"></span><span class="icon-font__mir footer__icon font-icon"></span></div>',2);function S(e,t,r,a,o,c){var s=Object(n["H"])("spoiler");return Object(n["z"])(),Object(n["g"])("section",m,[Object(n["h"])("div",b,[Object(n["h"])("div",v,[Object(n["h"])("div",y,[Object(n["k"])(s,{title:"О компании",titleClass:"footer__subtitle spoiler-title text",additional:e.minWidth[e.minWidthParams.md2]},{default:Object(n["Q"])((function(){return[k]})),_:1},8,["additional"])]),Object(n["h"])("div",O,[Object(n["k"])(s,{title:"Сервис и поддержка",titleClass:"footer__subtitle spoiler-title text",additional:e.minWidth[e.minWidthParams.md2]},{default:Object(n["Q"])((function(){return[j]})),_:1},8,["additional"])]),Object(n["h"])("div",x,[Object(n["k"])(s,{title:"Мы в соц сетях",titleClass:"footer__subtitle spoiler-title text",additional:e.minWidth[e.minWidthParams.md2]},{default:Object(n["Q"])((function(){return[w]})),_:1},8,["additional"])])]),Object(n["h"])("div",P,[Object(n["h"])("div",_,[Object(n["h"])("a",{onClick:t[0]||(t[0]=Object(n["T"])((function(){}),["prevent"])),href:""},"Астрахань")]),I])])])}var R=r("bb7e"),M={name:"FlowerFooter",components:{Spoiler:R["a"]},computed:Object(c["a"])(Object(c["a"])({},Object(s["c"])("anyParams",{minWidthParams:"minWidthParams"})),Object(s["c"])("anyParams",{minWidth:"minWidth"})),methods:{toggleSpoiler:function(){}},mounted:function(){}};r("4cb5");const C=p()(M,[["render",S]]);var B=C,A={class:"content-width"},N={class:"header__wrapper"},T={class:"header__text"},H={class:"header__title title"},L=Object(n["h"])("span",null,"f",-1),W=Object(n["h"])("span",null,"l",-1),E=Object(n["h"])("span",null,"o",-1),J=Object(n["h"])("span",null,"w",-1),z=Object(n["h"])("span",null,"e",-1),D=Object(n["h"])("span",null,"r",-1),F=Object(n["h"])("span",{class:"header__slogan"},"Магазин Цветов",-1),Q={class:"header__icons anim-icon--title"};function U(e,t,r,a,o,c){var s=Object(n["H"])("burger"),i=Object(n["H"])("router-link"),u=Object(n["H"])("search"),d=Object(n["H"])("navigation");return Object(n["z"])(),Object(n["g"])(n["a"],null,[Object(n["h"])("section",{style:Object(n["r"])({position:c.isFixed}),ref:"header",class:"header"},[Object(n["h"])("div",A,[Object(n["h"])("div",N,[Object(n["k"])(s,{class:"header__burger"}),Object(n["k"])(i,{to:{name:"main"},class:"icon-font__logo anim-icon anim-icon--logo"}),Object(n["h"])("div",T,[Object(n["h"])("h1",H,[Object(n["k"])(i,{to:{name:"main"}},{default:Object(n["Q"])((function(){return[L,W,E,J,z,D]})),_:1})]),F]),Object(n["k"])(u,{class:"header__search"}),Object(n["h"])("div",Q,[Object(n["h"])("span",{onClick:t[0]||(t[0]=function(){return e.toggleSearch&&e.toggleSearch.apply(e,arguments)}),class:"header__icon-search font-icon icon-font__search anim-icon"}),Object(n["k"])(i,{to:{name:"cart"},class:"header__icon-cart font-icon icon-font__cart anim-icon"},{default:Object(n["Q"])((function(){return[Object(n["R"])(Object(n["h"])("span",{class:"icon-font__cart--count"},Object(n["L"])(e.cart.length),513),[[n["O"],e.cart.length]])]})),_:1}),Object(n["k"])(i,{to:{name:"profile-info"},class:"header__icon-profile font-icon icon-font__profile anim-icon"})])])])],4),Object(n["R"])(Object(n["h"])("div",{class:"fake-header",style:Object(n["r"])({height:e.headerHeight+"px"})},null,4),[[n["O"],e.headerIsFixed]]),Object(n["k"])(d)],64)}var G=r("d542");r("4cd1");const q=p()(G["a"],[["render",U]]);var V=q,K={name:"App",components:{Alert:h,FlowerHeader:V,FlowerFooter:B},data:function(){return{}},computed:Object(c["a"])({},Object(s["c"])("anyParams",{minWidthParams:"minWidthParams"})),methods:Object(c["a"])({},Object(s["b"])("anyParams",["mediaQuery"])),mounted:function(){var e=Object.values(this.minWidthParams);this.mediaQuery({array:e,op:"add",media:"min-width"})},beforeUnmount:function(){var e=Object.values(this.minWidthParams);this.mediaQuery({array:e,op:"delete",media:"min-width"})},watch:{}};const $=p()(K,[["render",o]]);var X,Y,Z=$,ee=r("1da1"),te=(r("96cf"),r("e9c4"),r("d3b7"),r("a434"),r("a15b"),r("d81d"),r("e813")),re=r.n(te);function ne(){return new Promise((function(e){var t=function(){return re.a.get({},e)};window.requestIdleCallback?requestIdleCallback(t):setTimeout(t,5e3)}))}X=ne().then((function(e){return Y=e[0].value,e.splice(0,1)})).then((function(e){return e.map((function(e){return e.value})).join("")})).then(re.a.x64hash128).then((function(e){return{deviceId:e,userInfo:Y}}));var ae=X,oe=(r("ac1f"),r("1276"),r("81b2"),r("0eb6"),r("b7ef"),r("8bd4"),"flowerAccess");function ce(e){console.log("зашли set token");var t=ue(e);localStorage.setItem(oe,e),t.userName}function se(){console.log("зашли в cleanTokensData"),localStorage.removeItem(oe)}function ie(){return console.log("зашли get token"),localStorage.getItem(oe)}function ue(e){return console.log("зашли в getJWTPayload"),de(e).payload}function de(e){console.log("зашли в parseJWT");var t=e.split(".");return{header:le(t[0]),payload:le(t[1]),sign:t[2]}}function le(e){return console.log("зашли в parsePart"),JSON.parse(atob(e))}var ge="/cart",pe=function(e){return{load:function(){return Object(ee["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o,c,s,i,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Загрузка корзины с сервера"),r=ge+"/get",t.next=4,ae;case 4:return n=t.sent.deviceId,a=ie(),o={method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({fingerPrint:n})},t.next=9,e(r,o);case 9:return c=t.sent,s=c.ok,i=c.body,u=c.status,d=c.serverMessege,t.abrupt("return",{ok:s,body:i,status:u,serverMessege:d});case 15:case"end":return t.stop()}}),t)})))()},add:function(t){return Object(ee["a"])(regeneratorRuntime.mark((function r(){var n,a,o,c,s,i,u,d,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("Добавление в корзину на сервер"),r.next=3,ae;case 3:return n=r.sent.deviceId,a=ie(),o=ge,c={method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({fingerPrint:n,productId:t})},r.next=9,e(o,c);case 9:return s=r.sent,i=s.ok,u=s.body,d=s.status,l=s.serverMessege,r.abrupt("return",{ok:i,body:u,status:d,serverMessege:l});case 15:case"end":return r.stop()}}),r)})))()},remove:function(t){return Object(ee["a"])(regeneratorRuntime.mark((function r(){var n,a,o,c,s,i,u,d,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("Удаление в корзину на сервер"),r.next=3,ae;case 3:return n=r.sent.deviceId,a=ie(),o=ge,c={method:"DELETE",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({fingerPrint:n,productId:t})},r.next=9,e(o,c);case 9:return s=r.sent,i=s.ok,u=s.body,d=s.status,l=s.serverMessege,r.abrupt("return",{ok:i,body:u,status:d,serverMessege:l});case 15:case"end":return r.stop()}}),r)})))()},change:function(t,r){return Object(ee["a"])(regeneratorRuntime.mark((function n(){var a,o,c,s,i,u,d,l,g;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("Изменение кол-ва товаров в корзине на сервере"),n.next=3,ae;case 3:return a=n.sent.deviceId,o=ie(),c=ge,s={method:"PUT",headers:{Authorization:"Bearer ".concat(o),"Content-Type":"application/json"},body:JSON.stringify({fingerPrint:a,productId:t,newCount:r})},n.next=9,e(c,s);case 9:return i=n.sent,u=i.ok,d=i.body,l=i.status,g=i.serverMessege,n.abrupt("return",{ok:u,body:d,status:l,serverMessege:g});case 15:case"end":return n.stop()}}),n)})))()},getPromoValue:function(t,r){return Object(ee["a"])(regeneratorRuntime.mark((function n(){var a,o,c,s,i,u,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("Запрос на проверку промокода",t,r),a="/promo/check",o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:t,promo:r})},n.next=5,e(a,o);case 5:return c=n.sent,s=c.ok,i=c.body,u=c.status,d=c.serverMessege,n.abrupt("return",{ok:s,body:i,status:u,serverMessege:d});case 11:case"end":return n.stop()}}),n)})))()},checkOrder:function(t){return Object(ee["a"])(regeneratorRuntime.mark((function r(){var n,a,o,c,s,i,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("Запрос офрмление оплаты",t),n=ge+"/check",a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},r.next=5,e(n,a);case 5:return o=r.sent,c=o.ok,s=o.body,i=o.status,u=o.serverMessege,r.abrupt("return",{ok:c,body:s,status:i,serverMessege:u});case 11:case"end":return r.stop()}}),r)})))()},buy:function(t){return Object(ee["a"])(regeneratorRuntime.mark((function r(){var n,a,o,c,s,i,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("Покупка",t),console.log("2222222222222222 API",t),n="/order",a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reservation:t})},r.next=6,e(n,a);case 6:return o=r.sent,c=o.ok,s=o.body,i=o.status,u=o.serverMessege,r.abrupt("return",{ok:c,body:s,status:i,serverMessege:u});case 12:case"end":return r.stop()}}),r)})))()}}},fe="/user",he=function(e){return{signUp:function(t){return Object(ee["a"])(regeneratorRuntime.mark((function r(){var n,a,o,c,s,i,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,ae;case 2:return t.fingerPrint=r.sent.deviceId,r.next=5,ae;case 5:return t.deviceInfo=r.sent.userInfo,n=fe+"/registration",a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},r.next=10,e(n,a);case 10:return o=r.sent,c=o.ok,s=o.body,i=o.status,u=o.serverMessege,console.log("body",s),r.abrupt("return",{ok:c,body:s,status:i,serverMessege:u});case 17:case"end":return r.stop()}}),r)})))()},signIn:function(t){return Object(ee["a"])(regeneratorRuntime.mark((function r(){var n,a,o,c,s,i,u,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,ae;case 2:return t.fingerPrint=r.sent.deviceId,r.next=5,ae;case 5:return t.deviceInfo=r.sent.userInfo,n=fe+"/login",a={method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},r.next=10,e(n,a);case 10:return o=r.sent,c=o.ok,s=o.body,i=o.status,u=o.serverMessege,console.log("body",s),console.log("sign In! ответ: ",{ok:c,body:s,status:i,serverMessege:u}),c&&s.accessToken&&ce(s.accessToken),d=c?ue(s.accessToken):null,r.abrupt("return",{ok:c,body:s,payload:d,status:i,serverMessege:u});case 20:case"end":return r.stop()}}),r)})))()},auth:function(){return Object(ee["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o,c,s,i,u,d,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=ie(),n=fe+"/auth",t.next=4,ae;case 4:return a=t.sent.deviceId,o={credentials:"include",method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({fingerPrint:a})},t.next=8,e(n,o);case 8:return c=t.sent,s=c.ok,i=c.body,u=c.status,d=c.serverMessege,console.log("body",i),console.log("status",u),console.log({ok:s,body:i,status:u,serverMessege:d}),l=s?ue(ie()):null,t.abrupt("return",{ok:s,body:i,payload:l,status:u,serverMessege:d});case 18:case"end":return t.stop()}}),t)})))()},logout:function(){return Object(ee["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o,c,s,i,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=fe+"/logout",n=ie(),t.next=4,ae;case 4:return a=t.sent.deviceId,o={credentials:"include",method:"POST",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({fingerPrint:a})},t.next=8,e(r,o,!0);case 8:return c=t.sent,s=c.ok,i=c.body,u=c.status,d=c.serverMessege,
//! Третий параметр игнорировать в интерцепторе рефреш (происходит зацикливание в интерцепторе при рефреше)
s&&i&&se(),t.abrupt("return",{ok:s,body:i,status:u,serverMessege:d});case 15:case"end":return t.stop()}}),t)})))()},getLoginHistory:function(){return Object(ee["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o,c,s,i,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=fe+"/loginHistory",n=ie(),t.next=4,ae;case 4:return a=t.sent.deviceId,o={credentials:"include",method:"POST",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({fingerPrint:a})},t.next=8,e(r,o);case 8:return c=t.sent,s=c.ok,i=c.body,u=c.status,d=c.serverMessege,t.abrupt("return",{ok:s,body:i,status:u,serverMessege:d});case 14:case"end":return t.stop()}}),t)})))()},getLikesProducts:function(){return Object(ee["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o,c,s,i,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="/like/get",n=ie(),t.next=4,ae;case 4:return a=t.sent.deviceId,o={credentials:"include",method:"POST",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({fingerPrint:a})},t.next=8,e(r,o);case 8:return c=t.sent,s=c.ok,i=c.body,u=c.status,d=c.serverMessege,t.abrupt("return",{ok:s,body:i,status:u,serverMessege:d});case 14:case"end":return t.stop()}}),t)})))()},getOrders:function(){return Object(ee["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o,c,s,i,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Загрузка истории заказрв"),r="/order/get",t.next=4,ae;case 4:return n=t.sent.deviceId,a=ie(),o={method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({fingerPrint:n})},t.next=9,e(r,o);case 9:if(c=t.sent,s=c.ok,i=c.body,u=c.status,d=c.serverMessege,!s||!i){t.next=18;break}return t.abrupt("return",{ok:s,body:i,status:u,serverMessege:d});case 18:return t.abrupt("return",!1);case 19:case"end":return t.stop()}}),t)})))()}}},me="/product",be=function(e){return{getAll:function(){return Object(ee["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("зашли product API"),t.next=3,e(me);case 3:return r=t.sent,n=r.ok,a=r.body,o=r.status,c=r.serverMessege,t.abrupt("return",{ok:n,body:a,status:o,serverMessege:c});case 9:case"end":return t.stop()}}),t)})))()},getByTagId:function(t){return Object(ee["a"])(regeneratorRuntime.mark((function r(){var n,a,o,c,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n="/params?param=tagId&tag=".concat(t),r.next=3,e(me+n);case 3:return a=r.sent,o=a.ok,c=a.body,s=a.status,i=a.serverMessege,r.abrupt("return",{ok:o,body:c,status:s,serverMessege:i});case 9:case"end":return r.stop()}}),r)})))()},getByTagName:function(t){return Object(ee["a"])(regeneratorRuntime.mark((function r(){var n,a,o,c,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(t),n="/params?param=tagName&tag=".concat(t),r.next=4,e(me+n);case 4:return a=r.sent,o=a.ok,c=a.body,s=a.status,i=a.serverMessege,r.abrupt("return",{ok:o,body:c,status:s,serverMessege:i});case 10:case"end":return r.stop()}}),r)})))()},getByCategoryId:function(t){return Object(ee["a"])(regeneratorRuntime.mark((function r(){var n,a,o,c,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n="/params?param=categoryId&category=".concat(t),r.next=3,e(me+n);case 3:return a=r.sent,o=a.ok,c=a.body,s=a.status,i=a.serverMessege,r.abrupt("return",{ok:o,body:c,status:s,serverMessege:i});case 9:case"end":return r.stop()}}),r)})))()},getByCategoryName:function(t){return Object(ee["a"])(regeneratorRuntime.mark((function r(){var n,a,o,c,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n="/params?param=categoryName&category=".concat(t),r.next=3,e(me+n);case 3:return a=r.sent,o=a.ok,c=a.body,s=a.status,i=a.serverMessege,r.abrupt("return",{ok:o,body:c,status:s,serverMessege:i});case 9:case"end":return r.stop()}}),r)})))()},getOneProductById:function(t){return Object(ee["a"])(regeneratorRuntime.mark((function r(){var n,a,o,c,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n="/params?param=id&id=".concat(t),r.next=3,e(me+n);case 3:return a=r.sent,o=a.ok,c=a.body,s=a.status,i=a.serverMessege,r.abrupt("return",{ok:o,body:c,status:s,serverMessege:i});case 9:case"end":return r.stop()}}),r)})))()},getByName:function(t){return Object(ee["a"])(regeneratorRuntime.mark((function r(){var n,a,o,c,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n="/params?param=name&name=".concat(t),r.next=3,e(me+n);case 3:return a=r.sent,o=a.ok,c=a.body,s=a.status,i=a.serverMessege,r.abrupt("return",{ok:o,body:c,status:s,serverMessege:i});case 9:case"end":return r.stop()}}),r)})))()},getProductsById:function(t){return Object(ee["a"])(regeneratorRuntime.mark((function r(){var n,a,o,c,s,i,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n="/arrId",a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idArr:t})},r.next=4,e(me+n,a);case 4:return o=r.sent,c=o.ok,s=o.body,i=o.status,u=o.serverMessege,r.abrupt("return",{ok:c,body:s,status:i,serverMessege:u});case 10:case"end":return r.stop()}}),r)})))()}}},ve="/news",ye=function(e){return{getAll:function(){return Object(ee["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,e(ve);case 3:return r=t.sent,n=r.ok,a=r.body,o=r.status,c=r.serverMessege,t.abrupt("return",{ok:n,body:a,status:o,serverMessege:c});case 9:case"end":return t.stop()}}),t)})))()}}},ke="/category",Oe=function(e){return{getAll:function(){return Object(ee["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Api Получение категорий"),t.next=3,e(ke);case 3:return r=t.sent,n=r.ok,a=r.body,o=r.status,c=r.serverMessege,t.abrupt("return",{ok:n,body:a,status:o,serverMessege:c});case 9:case"end":return t.stop()}}),t)})))()}}},je="/like",xe=function(e){return{load:function(){return Object(ee["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o,c,s,i,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Загрузка избранных товаров с сервера"),r=je+"/get",t.next=4,ae;case 4:return n=t.sent.deviceId,a=ie(),o={method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({fingerPrint:n})},t.next=9,e(r,o);case 9:return c=t.sent,s=c.ok,i=c.body,u=c.status,d=c.serverMessege,t.abrupt("return",{ok:s,body:i,status:u,serverMessege:d});case 15:case"end":return t.stop()}}),t)})))()},add:function(t){return Object(ee["a"])(regeneratorRuntime.mark((function r(){var n,a,o,c,s,i,u,d,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("Добавление избаррного тавара на сервер"),r.next=3,ae;case 3:return n=r.sent.deviceId,a=ie(),o=je,c={method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({fingerPrint:n,productId:t})},r.next=9,e(o,c);case 9:return s=r.sent,i=s.ok,u=s.body,d=s.status,l=s.serverMessege,r.abrupt("return",{ok:i,body:u,status:d,serverMessege:l});case 15:case"end":return r.stop()}}),r)})))()},remove:function(t){return Object(ee["a"])(regeneratorRuntime.mark((function r(){var n,a,o,c,s,i,u,d,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("Удаление избаррного тавара на сервер"),r.next=3,ae;case 3:return n=r.sent.deviceId,a=ie(),o=je,c={method:"DELETE",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({fingerPrint:n,productId:t})},r.next=9,e(o,c);case 9:return s=r.sent,i=s.ok,u=s.body,d=s.status,l=s.serverMessege,r.abrupt("return",{ok:i,body:u,status:d,serverMessege:l});case 15:case"end":return r.stop()}}),r)})))()}}},we="/rating",Pe=function(e){return{getCount:function(t){return Object(ee["a"])(regeneratorRuntime.mark((function r(){var n,a,o,c,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("Загрузка колчества оценок товара с сервера"),n="/?id=".concat(t),r.next=4,e(we+n);case 4:return a=r.sent,o=a.ok,c=a.body,s=a.status,i=a.serverMessege,r.abrupt("return",{ok:o,body:c,status:s,serverMessege:i});case 10:case"end":return r.stop()}}),r)})))()},getMark:function(t){return Object(ee["a"])(regeneratorRuntime.mark((function r(){var n,a,o,c,s,i,u,d,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("Загрузка оценки товара пользователем с сервера"),n=we+"/get",r.next=4,ae;case 4:return a=r.sent.deviceId,o=ie(),c={method:"POST",headers:{Authorization:"Bearer ".concat(o),"Content-Type":"application/json"},body:JSON.stringify({fingerPrint:a,productId:t})},r.next=9,e(n,c);case 9:return s=r.sent,i=s.ok,u=s.body,d=s.status,l=s.serverMessege,r.abrupt("return",{ok:i,body:u,status:d,serverMessege:l});case 15:case"end":return r.stop()}}),r)})))()},add:function(t,r){return Object(ee["a"])(regeneratorRuntime.mark((function n(){var a,o,c,s,i,u,d,l,g;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("Добавление оценки тавара пользователем на сервер"),n.next=3,ae;case 3:return a=n.sent.deviceId,o=ie(),c=we,s={method:"POST",headers:{Authorization:"Bearer ".concat(o),"Content-Type":"application/json"},body:JSON.stringify({fingerPrint:a,productId:t,mark:r})},n.next=9,e(c,s);case 9:return i=n.sent,u=i.ok,d=i.body,l=i.status,g=i.serverMessege,n.abrupt("return",{ok:u,body:d,status:l,serverMessege:g});case 15:case"end":return n.stop()}}),n)})))()}}};function _e(e){var t=e.status;return"NoConnect"===t?"произошла ошибка соеденения с сервером.":400===t?"произошла ошибка. Неверно заполнены данные":401===t?"произошла ошибка. Авторизуйтесь":403===t?"Необходима повторная авторизация":500===t?"произошла непредвиденная ошибка.":""}var Ie=null;function Se(e){return Re.apply(this,arguments)}function Re(){return Re=Object(ee["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,o,c,s,i,u,d,l=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:{},n=l.length>2?l[2]:void 0,a=l.length>3?l[3]:void 0,console.log("3333333333333333333333333333333",a),null!==Ie){e.next=9;break}return e.next=7,ae;case 7:o=e.sent.deviceId,Ie=n("/user/refreshToken",{credentials:"include",headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({fingerPrint:o})});case 9:return e.next=11,Ie;case 11://! костыль для редких ситуаций, которые не ломают авторизацию, но делают одно лишний запрос на refresh
if(c=e.sent,s=c.ok,i=c.body,u=c.serverMessege,setTimeout((function(){Ie=null}),1e4),!s){e.next=25;break}return console.log("refresh ok",i),ce(i.accessToken),d=s?ue(i.accessToken):null,a.dispatch("user/changeUser",d),r.headers.Authorization="Bearer ".concat(i.accessToken),e.abrupt("return",n(t,r));case 25:return e.abrupt("return",{ok:s,body:i,status:403,serverMessege:u});case 26:case"end":return e.stop()}}),e)}))),Re.apply(this,arguments)}var Me,Ce,Be,Ae,Ne,Te,He=void 0,Le="https://flower-back.herokuapp.com/api",We={response:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,o,c,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=s.length>1&&void 0!==s[1]&&s[1],!r){e.next=3;break}return e.abrupt("return",t);case 3:return n=t.ok,a=t.status,e.next=6,t.json();case 6:return o=e.sent,c=_e({status:a}),e.abrupt("return",{ok:n,body:o,status:a,serverMessege:c});case 9:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),noOk:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,o,c,s,i,u,d,l,g,p,f,h,m,b,v=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=v.length>1&&void 0!==v[1]?v[1]:{},n=v.length>2?v[2]:void 0,a=v.length>3&&void 0!==v[3]&&v[3],!a){e.next=5;break}return e.abrupt("return",t);case 5:if(401!==t.status){e.next=19;break}return console.log(401),e.next=9,Se(n,r,He.connect);case 9:return o=e.sent,c=o.ok,s=o.body,i=o.status,u=o.serverMessege,console.log("Рефреш!!!!!!!!!!!!!!!!!! response",{ok:c,body:s,status:i,serverMessege:u}),c||console.log("рефреш не ок"),e.abrupt("return",{ok:c,body:s,status:i,serverMessege:u});case 19:if(403!==t.status){e.next=27;break}if(!a){e.next=22;break}return e.abrupt("return",t);case 22:return d=t.ok,l=t.body,g=t.status,p=_e({status:g}),e.abrupt("return",{ok:d,body:l,status:g,serverMessege:p});case 27:return f=t.ok,h=t.status,e.next=30,t.json();case 30:return m=e.sent,b=_e({status:h}),e.abrupt("return",{ok:f,body:m,status:h,serverMessege:b});case 33:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),error:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.ok,n=t.body,a=t.status,o=_e({status:a}),e.abrupt("return",{ok:r,body:n,status:a,serverMessege:o});case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},Ee={connect:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,o,c,s,i,u,d,l,g,p,f,h,m,b=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=b.length>1&&void 0!==b[1]?b[1]:{},n=b.length>2&&void 0!==b[2]&&b[2],e.prev=2,console.log({url:t,options:r}),console.log("full url:",Le+t),e.next=7,fetch(Le+t,r);case 7:if(a=e.sent,!a.ok){e.next=19;break}return e.next=11,We.response(a,n);case 11:return o=e.sent,c=o.ok,s=o.status,i=o.body,u=o.serverMessege,e.abrupt("return",{ok:c,body:i,status:s,serverMessege:u});case 19:if(!1!==a.ok){e.next=29;break}return console.log("server не ок"),e.next=23,We.noOk(a,r,t,n);case 23:return d=e.sent,l=d.ok,g=d.status,p=d.body,f=d.serverMessege,e.abrupt("return",{ok:l,body:p,status:g,serverMessege:f});case 29:e.next=40;break;case 31:return e.prev=31,e.t0=e["catch"](2),console.log("Зашли?"),console.log("!!!!!!!!!!!!!!!!!!!!",e.t0),e.next=37,We.error({ok:!1,body:e.t0,status:"NoConnect"});case 37:return h=e.sent,m=h.serverMessege,e.abrupt("return",{ok:!1,body:e.t0,status:"NoConnect",serverMessege:m});case 40:case"end":return e.stop()}}),e,null,[[2,31]])})));function t(t){return e.apply(this,arguments)}return t}(),interceptor:We},Je=Ee.connect,ze=he(Je),De=pe(Je),Fe=be(Je),Qe=Oe(Je),Ue=ye(Je),Ge=xe(Je),qe=(Pe(Je),{namespaced:!0,state:{news:[]},getters:{news:function(e){return e.news}},mutations:{addNews:function(e,t){e.news=t}},actions:{getNews:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,Ue.getAll();case 3:n=e.sent,a=n.ok,o=n.body,c=n.serverMessege,a?r("addNews",o):console.log(c);case 8:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}}),Ve=(r("159b"),r("25f0"),r("4de4"),{namespaced:!0,state:{products:null},getters:{products:function(e){return e.products},productsMap:function(e){var t,r={};return null===(t=e.products)||void 0===t||t.forEach((function(e,t){r[e.id.toString()]=t})),r},product:function(e,t){return e.products?function(r){return e.products[t.productsMap[r]]}:function(){}}},mutations:{addProducts:function(e,t){e.products=t},changeProduct:function(e,t){var r=t.index,n=t.item;e.products[r]=n},pushProduct:function(e,t){e.products.push(t)}},actions:{getProducts:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,c,s,i,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,a=t.commit,o=r.critical,c=r.messege,console.log({productApi:Fe}),e.next=5,Fe.getAll();case 5:s=e.sent,i=s.ok,u=s.body,d=s.serverMessege,i?(console.log("Склад, ок, продукты получены"),a("addProducts",u)):(console.log("Ошибка, обработка от api:",{serverMessege:d}),n("alerts/add",{type:"error",text:c+d,critical:o},{root:!0}));case 10:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),getByProductsId:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,c,s,i,u,d,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,a=r.critical,o=r.messege,c=r.param,e.next=4,Fe.getProductsById(c);case 4:if(s=e.sent,i=s.ok,u=s.body,d=s.serverMessege,!i){e.next=23;break}if(l=u.filter((function(e){return!1===(null===e||void 0===e?void 0:e.has)})),
//! Это не тестировалось, т.к не эмитировалось удаление товаров на сервере. По идее нужно найти товары которые не false и добавить их. 
//! Вот так:========================================
//! ==================================================
console.log(u),l.length||!u.length){e.next=16;break}return n("changeProduct",u),e.abrupt("return",u);case 16:if(!l.length){e.next=20;break}l.forEach((function(e){n("removeProduct",e.id)})),e.next=21;break;case 20:return e.abrupt("return",!1);case 21:e.next=25;break;case 23:console.log("Ошибка, getByProductsId",{serverMessege:d}),n("alerts/add",{type:"error",text:o+d,critical:a},{root:!0});case 25:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),getOneProductById:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,c,s,i,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,a=r.critical,o=r.messege,c=r.id,e.next=4,Fe.getOneProductById(c);case 4:s=e.sent,i=s.ok,u=s.body,d=s.serverMessege,i&&u?(console.log(u),n("changeProduct",[u])):i&&!u?(
//! Продукт на сервере не найден
console.log("Товара нет на сревер! Если есть в списках - удалить!"),n("removeProduct",c)):(console.log("Ошибка, getByProductsId",{serverMessege:d}),n("alerts/add",{type:"error",text:o+d,critical:a},{root:!0}));case 9:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),getByTagName:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,c,s,i,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,a=r.critical,o=r.messege,c=r.param,console.log("getByTagName",c),e.next=5,Fe.getByTagName(c);case 5:s=e.sent,i=s.ok,u=s.body,d=s.serverMessege,i?(console.log(u),n("changeProduct",u)):(console.log("Ошибка, getByTagName",{serverMessege:d}),n("alerts/add",{type:"error",text:o+d,critical:a},{root:!0}));case 10:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),getByCategoryName:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,c,s,i,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,a=r.critical,o=r.messege,c=r.param,console.log("getByCategoryName",c),e.next=5,Fe.getByCategoryName(c);case 5:s=e.sent,i=s.ok,u=s.body,d=s.serverMessege,i?(console.log("получили продукты по  параметру",c,u),n("changeProduct",u)):(console.log("Ошибка, getByTagName",{serverMessege:d}),n("alerts/add",{type:"error",text:o+d,critical:a},{root:!0}));case 10:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),getByName:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,c,s,i,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,a=r.critical,o=r.messege,c=r.param,console.log("getByName",c),e.next=5,Fe.getByName(c);case 5:if(s=e.sent,i=s.ok,u=s.body,d=s.serverMessege,!i){e.next=15;break}return console.log("получили продукты по имени",c,u),n("changeProduct",u),e.abrupt("return",u);case 15:console.log("Ошибка, getByTagName",{serverMessege:d}),n("alerts/add",{type:"error",text:o+d,critical:a},{root:!0});case 17:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),changeProduct:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,a=t.getters,null===a.products?n("addProducts",r):r.forEach((function(e){void 0!==a.product(e.id)?n("changeProduct",{index:a.productsMap[e.id],item:e}):(console.log("Товара нет в списке. Пуш!!!!!!!!!"),n("pushProduct",e))}));case 2:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),removeProduct:function(e,t){var r=e.commit,n=e.getters,a=e.dispatch;n.product(t);var o,c=null===(o=n.products)||void 0===o?void 0:o.filter((function(e){return e.id!==t}));r("addProducts",c),a("cart/remove",t,{root:!0})}}}),Ke={namespaced:!0,state:{categories:[]},getters:{categories:function(e){return e.categories}},mutations:{addCategories:function(e,t){e.categories=t}},actions:{getCategories:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,c,s,i,u,d,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,a=t.commit,o=r.critical,c=r.messege,s=void 0===c?"При получении категорий от сервера":c,e.next=4,Qe.getAll();case 4:i=e.sent,u=i.ok,d=i.body,l=i.serverMessege,u?a("addCategories",d):n("alerts/add",{type:"error",text:s+l,critical:o},{root:!0});case 9:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()}},$e=(r("99af"),r("5319"),{namespaced:!0,state:{apiUrl:"https://flower-back.herokuapp.com/api",serverUrl:"https://flower-back.herokuapp.com/",minWidthParams:{md1:"320",md2:"768",md3:"1024"},burgerIsActive:!1,bodyLock:!1,filterShow:!1,searchIsActive:!1,minWidth:{},headerIsFixed:!0,headerHeight:null},getters:{burgerIsActive:function(e){return e.burgerIsActive},bodyLock:function(e){return e.bodyLock},filterShow:function(e){return e.filterShow},nodeBody:function(){return document.querySelector("body")},searchIsActive:function(e){return e.searchIsActive},minWidthParams:function(e){return e.minWidthParams},minWidth:function(e){return e.minWidth},apiUrl:function(e){return e.apiUrl},serverUrl:function(e){return e.serverUrl},headerHeight:function(e){return e.headerHeight},headerIsFixed:function(e){return e.headerIsFixed}},mutations:{changeBurger:function(e,t){e.burgerIsActive=t},showFilter:function(e,t){e.filterShow=t},changeBodyLock:function(e,t){e.bodyLock=t},changeSearch:function(e,t){e.searchIsActive=t},changeMinWidth:function(e,t){var r=t.width,n=t.status;e.minWidth[r]=n},changeHeaderHeight:function(e,t){e.headerHeight=t},changeHeaderPosition:function(e,t){e.headerIsFixed=t}},actions:{toggleBurger:function(e){e.commit("changeBurger",!e.getters.burgerIsActive),e.dispatch("toggleBodyLock")},toggleFilter:function(e){e.commit("showFilter",!e.getters.filterShow),e.dispatch("toggleBodyLock")},toggleBodyLock:function(e){e.commit("changeBodyLock",e.getters.burgerIsActive||e.getters.filterShow),e.getters.bodyLock?document.body.classList.add("lock"):document.body.classList.remove("lock")},toggleSearch:function(e){e.commit("changeSearch",!e.getters.searchIsActive)},changeHeaderHeight:function(e,t){e.getters.headerIsFixed?e.commit("changeHeaderHeight",t):e.commit("changeHeaderHeight",0)},changeHeaderStatus:function(e,t){e.commit("changeHeaderPosition",t)},mediaQuery:function(e,t){var r=t.op,n=t.array,a=t.media,o=function(e,t){var r="(".concat(e,": ").concat(t,"px)"),n=window.matchMedia(r);n.removeEventListener("change",s)},c=function(t,r){var n="(".concat(t,": ").concat(r,"px)"),a=window.matchMedia(n);a.addEventListener("change",s),a.matches?e.commit("changeMinWidth",{width:r,status:!0}):e.commit("changeMinWidth",{width:r,status:!1})};function s(t){t.matches?e.commit("changeMinWidth",{width:t.media.replace(/[^0-9]+/g,""),status:!0}):e.commit("changeMinWidth",{width:t.media.replace(/[^0-9]+/g,""),status:!1})}"add"===r?n.forEach((function(e){c(a,e)})):"delete"===r&&n.forEach((function(e){o(a,e)}))}}}),Xe=r("3835"),Ye=(r("841c"),r("b0c0"),r("498a"),{namespaced:!0,state:{filterParams:{discount:!1,categoryId:!1,range:{from:null,to:null}},filterItems:[],search:" ",isActive:!1,products:[],awaitSerch:!1},getters:{filterParams:function(e){return e.filterParams},search:function(e){return e.search},filterItems:function(e){return e.filterItems},filterActive:function(e){return e.isActive},maxPrice:function(e){var t;return null===(t=e.products)||void 0===t?void 0:t.reduce((function(e,t){return e.price>t.price?e:t}),0).price},products:function(e){return e.products},awaitSerch:function(e){return e.awaitSerch}},mutations:{changeDiscount:function(e,t){e.filterParams.discount=t},changeCategory:function(e,t){e.filterParams.categoryId=t},changeRange:function(e,t){var r=Object(Xe["a"])(t,2),n=r[0],a=r[1];e.filterParams.range.from=n,e.filterParams.range.to=a},changeSearch:function(e,t){e.search=""!==t?t:" "},setItems:function(e,t){e.filterItems=t},activated:function(e,t){e.isActive=t},setData:function(e,t){e.products=t},changeAwaitSearch:function(e,t){e.awaitSerch=t}},actions:{changeFilter:function(e,t){var r=t.name,n=t.value;"range"===r?e.commit("changeRange",n):"discount"===r?e.commit("changeDiscount",!e.getters.filterParams.discount):e.commit("changeCategory",n)},setData:function(e,t){var r=e.commit;r("setData",t)},apply:function(e){var t=e.commit,r=e.getters,n=r.products;r.filterParams.discount&&(n=n.filter((function(e){return 0!==e.discount}))),n=n.filter((function(e){return e.price-e.price*e.discount/100>=r.filterParams.range.from&&e.price-e.price*e.discount/100<=r.filterParams.range.to})),t("setItems",n),t("activated",!0)},cancel:function(e){var t=e.commit;t("activated",!1)},inputSearch:function(e,t){t?e.commit("changeSearch",t.target.value):e.commit("changeSearch","")},setSearch:function(e,t){console.log("11111111111111111111111111",t),t?e.commit("changeSearch",t):e.commit("changeSearch","")},goSearch:function(e){return Object(ee["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.commit,n=e.getters,a=e.dispatch,n.awaitSerch||""===n.search.trim()){t.next=8;break}return r("changeAwaitSearch",!0),t.next=5,a("product/getByName",{param:n.search},{root:!0});case 5:o=t.sent,r("setData",o),r("changeAwaitSearch",!1);case 8:case"end":return t.stop()}}),t)})))()}}}),Ze=(r("7db0"),r("caad"),r("2532"),r("b64b"),{namespaced:!0,state:{cart:[],idProcessing:[],adressee:{name:"",surname:"",phone:"",adress:"",email:"",warning:{}},orderId:null},getters:{readyCart:function(){return Ce},cart:function(e){return e.cart},has:function(e){return function(t){return e.cart.some((function(e){return e.id===t}))}},productsId:function(e){return e.cart.map((function(e){return e.id}))},productsInfo:function(e,t,r,n){var a=[];return e.cart.forEach((function(e){var t=n["product/product"](e.id);t&&a.push(Object(c["a"])(Object(c["a"])({},e),t))})),a},warningField:function(e){return function(t){return e.adressee.warning[t]}},adressee:function(e){return e.adressee},promoProductActive:function(e){return function(t){var r,n,a;return null===(r=e.cart)||void 0===r||null===(n=r.find((function(e){return e.id===t})))||void 0===n||null===(a=n.promo)||void 0===a?void 0:a.value}},promoProductValue:function(e){return function(t){return e.promoProductActive(t)?e.promoProductActive(t):0}},totalPrice:function(e){var t;return null===(t=e.productsInfo)||void 0===t?void 0:t.reduce((function(e,t){return e+t.price*t.count}),0)},totalDiscount:function(e){var t;return null===(t=e.productsInfo)||void 0===t?void 0:t.reduce((function(t,r){return t+r.price*r.discount/100*r.count+r.price*e.promoProductValue(r.id)/100*r.count}),0)},total:function(e){var t=e.totalPrice,r=e.totalDiscount;return t-r},inProcessing:function(e){return function(t){return e.idProcessing.includes(t)}},canOrder:function(e,t){return!Object.values(e.adressee).some((function(e){return""===e}))&&!Object.values(e.adressee.warning).length&&!t.productsInfo.some((function(e){return e.count<1}))&&!t.productsInfo.some((function(e){return 0===e.maxCount}))},orderId:function(e){return e.orderId}},mutations:{add:function(e,t){e.cart.push({id:t,count:1})},remove:function(e,t){e.cart=e.cart.filter((function(e){return e.id!==t}))},changeCount:function(e,t){var r=t.i,n=t.newCount;e.cart[r].count=n},replaceCart:function(e,t){e.cart=t},changeAdressee:function(e,t){var r=t.name,n=t.value;e.adressee[r]=n},changeWarning:function(e,t){var r=t.name,n=t.value;e.adressee.warning[r]=n},deleteWarning:function(e,t){var r=t.name;delete e.adressee.warning[r]},pushPromo:function(e,t){var r=t.productId,n=t.body;e.cart.find((function(e){return e.id===r})).promo=n},popPromo:function(e,t){var r=t.productId;delete e.cart.find((function(e){return e.id===r})).promo},pushProcessing:function(e,t){e.idProcessing.push(t)},popProcessing:function(e,t){e.idProcessing=e.idProcessing.filter((function(e){return e!==t}))},setOrderId:function(e,t){e.orderId=t}},actions:{add:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,c,s,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.rootGetters,a=t.getters,o=t.commit,c=t.dispatch,a.inProcessing(r)){e.next=19;break}if(o("pushProcessing",r),a.has(r)||null===r&&void 0===r){e.next=17;break}if(!n["user/isLogin"]){e.next=13;break}return e.next=7,De.add(r);case 7:s=e.sent,i=s.ok,u=s.body,u&&i?o("add",r):c("alerts/add",{text:"Ошибка при добавлении товара в корзину. Повторите попытку",type:"error",critical:!1},{root:!0}),e.next=15;break;case 13:o("add",r),localStorage.setItem("cart",JSON.stringify(a.cart));case 15:e.next=18;break;case 17:!a.has(r)||null===r&&void 0===r||(o("popProcessing",r),c("remove",r));case 18:o("popProcessing",r);case 19:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),remove:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,c,s,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.commit,a=t.rootGetters,o=t.getters,c=t.dispatch,o.inProcessing(r)){e.next=17;break}if(console.log("Зашли?"),n("pushProcessing",r),!o.has(r)||null===r&&void 0===r){e.next=16;break}if(!a["user/isLogin"]){e.next=14;break}return e.next=8,De.remove(r);case 8:s=e.sent,i=s.ok,u=s.body,u&&i?n("remove",r):c("alerts/add",{text:"Ошибка при удалении товара из корзины. Повторите попытку",type:"error",critical:!1},{root:!0}),e.next=16;break;case 14:n("remove",r),localStorage.setItem("cart",JSON.stringify(o.cart));case 16:n("popProcessing",r);case 17:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),changeCount:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,c,s,i,u,d,l,g,p,f,h,m,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.commit,a=t.getters,o=t.rootGetters,c=t.dispatch,s=r.id,i=r.op,u=r.value,d=r.index,a.inProcessing(s)){e.next=28;break}return n("pushProcessing",s),e.next=6,c("product/getOneProductById",{text:"",type:"error",critical:!1,id:s},{root:!0});case 6:if(u=isNaN(parseInt(u))?1:u,p=a.productsInfo[d],"increase"===i?u=p.count+u:"decrease"===i&&(u=p.count-u),u=Math.min(Math.max(1,u),p.maxCount),0!==u){e.next=14;break}return c("alerts/add",{text:"Товар закончился",type:"error",critical:!1},{root:!0}),n("popProcessing",s),e.abrupt("return");case 14:if(null===(l=a.cart)||void 0===l||l.find((function(e,t){e.id===s&&(f=t)})),!(null!==(g=a.cart)&&void 0!==g&&g.length&&void 0!==f&&p.count!==u&&u<=p.maxCount&&u>=1)){e.next=27;break}if(!o["user/isLogin"]){e.next=25;break}return e.next=19,De.change(s,u);case 19:h=e.sent,m=h.ok,b=h.body,b&&m?n("changeCount",{i:f,newCount:u}):c("alerts/add",{text:"Ошибка при изменении кол-ва товаров, повторите попытку",type:"error",critical:!1},{root:!0}),e.next=27;break;case 25:n("changeCount",{i:f,newCount:u}),localStorage.setItem("cart",JSON.stringify(a.cart));case 27:n("popProcessing",s);case 28:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),replaceCart:function(e,t){var r=e.commit;console.log("Замена карты на ",t),r("replaceCart",t)},load:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,o,c,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.rootGetters,Ce=new Promise((function(e){Me=e})),e.next=4,n["user/readyAuth"];case 4:if(!n["user/isLogin"]){e.next=16;break}return e.next=7,De.load();case 7:a=e.sent,o=a.ok,c=a.body,s=a.status,i=a.serverMessege,console.log("load cart",{ok:o,body:c,status:s,serverMessege:i}),o&&(c.forEach((function(e){delete Object.assign(e,{id:e.product_id}).product_id,delete Object.assign(e,{count:e.count_}).count_})),r("replaceCart",c)),e.next=17;break;case 16:r("installStorageCart");case 17:Me();case 18:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getPromoValue:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,c,s,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,a=t.dispatch,o=r.productId,c=r.promo,e.next=4,De.getPromoValue(o,c);case 4:if(s=e.sent,i=s.ok,u=s.body,!i){e.next=23;break}if(null!==u){e.next=14;break}return a("alerts/add",{text:"промокод не активен",type:"info",critical:!1},{root:!0}),n("popPromo",{productId:o}),e.abrupt("return",null);case 14:if(!1!==u){e.next=20;break}return a("alerts/add",{text:"Ошибка обработки промокода",type:"info",critical:!1},{root:!0}),n("popPromo",{productId:o}),e.abrupt("return",null);case 20:n("pushPromo",{productId:o,body:u});case 21:e.next=25;break;case 23:return a("alerts/add",{text:"Ошибка при обращении к серверу. Попробуйте снова",type:"info",critical:!1},{root:!0}),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),installStorageCart:function(e){var t,r=e.dispatch,n=e.rootGetters;!n["user/isLogin"]&&null!==(t=JSON.parse(localStorage.getItem("cart")))&&void 0!==t&&t.length&&r("replaceCart",JSON.parse(localStorage.getItem("cart")))},changeAdressee:function(e,t){var r=e.commit,n=t.name,a=t.value,o=t.validate,c=t.warning;"name"!==n&&"surname"!==n&&"phone"!==n&&"adress"!==n&&"email"!==n||(o?(r("changeAdressee",{name:n,value:a}),r("deleteWarning",{name:n})):(c=""===a?"Не заполнено":c,r("changeAdressee",{name:n,value:""}),r("changeWarning",{name:n,value:c})))},deleteWarning:function(e,t){var r=e.commit,n=e.getters,a=t.name;Object.keys(n.adressee.warning).some((function(e){return e===a}))&&r("deleteWarning",{name:a})},checkOrder:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,o,s,i,u,d,l,g,p,f,h,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,n=t.getters,a=t.dispatch,o=[],n.cart.forEach((function(e){var t,r=e.id;null!==e&&void 0!==e&&e.promo?(t=e.promo.name,o.push(Object(c["a"])(Object(c["a"])(Object(c["a"])({},e),{productId:r}),{promo:t}))):o.push(Object(c["a"])(Object(c["a"])({},e),{productId:r}))})),!n.canOrder){e.next=15;break}return s={products:o,total:n.total,discount:n.totalDiscount,customerInfo:{name:n.adressee.name,surname:n.adressee.surname,telephone:n.adressee.phone,adress:n.adressee.adress,email:n.adressee.email}},e.next=7,De.checkOrder(s);case 7:if(i=e.sent,u=i.ok,d=i.body,console.log("1111111111111111111",u,d),!u&&d&&(null!==d&&void 0!==d&&null!==(l=d.messege)&&void 0!==l&&l.error?null!==d&&void 0!==d&&null!==(g=d.messege)&&void 0!==g&&g.error&&(!1===(null===(p=d.messege)||void 0===p?void 0:p.total)&&(a("alerts/add",{text:"Цена товара изменилась! Получаем новые цены...",type:"error",critical:!1},{root:!0}),a("product/getByProductsId",{param:n.productsId},{root:!0})),!1===(null===(f=d.messege)||void 0===f?void 0:f.discount)&&(a("alerts/add",{text:"Скидки на товар изменились! Получаем новые цены...",type:"error",critical:!1},{root:!0}),a("product/getByProductsId",{param:n.productsId},{root:!0})),null!==(h=d.messege)&&void 0!==h&&h.checkCount&&(a("alerts/add",{text:"Количество товаров изменилось! Получаем актуальные  данные...",type:"error",critical:!1},{root:!0}),a("product/getByProductsId",{param:n.productsId},{root:!0})),null!==(m=d.messege)&&void 0!==m&&m.checkPromo&&(a("alerts/add",{text:"Один из промокодов недействителен, проверяем промокоды...",type:"error",critical:!1},{root:!0}),d.messege.checkPromo.filer((function(e){return!1===e.promo_value})).forEach((function(e){a("getPromoValue",{productId:e.id,promo:e.promo_name})})))):a("alerts/add",{text:"Заполните все данные!",type:"error",critical:!1},{root:!0})),!u||!d.reservation){e.next=15;break}return r("setOrderId",d.reservation),e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),buy:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,o,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.getters,n=t.dispatch,a=t.commit,e.next=3,De.buy(r.orderId);case 3:if(o=e.sent,c=o.ok,s=o.body,c||!1!==s.status){e.next=11;break}return n("alerts/add",{text:"Время покупки истекло. Оформите снова",type:"error",critical:!1},{root:!0}),e.abrupt("return",!1);case 11:if(!c||!0!==s.status){e.next=15;break}return n("alerts/add",{text:"Заказ офрмлен",type:"error",critical:!1},{root:!0}),a("replaceCart",[]),e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}}),et={namespaced:!0,state:{likes:[],idProcessing:[],likesProducts:[]},getters:{readyLoad:function(){return Ae},likes:function(e){return e.likes},has:function(e){return function(t){var r;return null===(r=e.likes)||void 0===r?void 0:r.some((function(e){return e===t}))}},inProcessing:function(e){return function(t){return e.idProcessing.includes(t)}},likesProducts:function(e){return e.likesProducts},likesId:function(e){return Object.values(null===e||void 0===e?void 0:e.likes)}},mutations:{add:function(e,t){e.likes.push(t)},remove:function(e,t){e.likes=e.likes.filter((function(e){return e!==t})),e.likesProducts=e.likesProducts.filter((function(e){return e.id!==t}))},replaceData:function(e,t){e.likes=t},pushProcessing:function(e,t){e.idProcessing.push(t)},popProcessing:function(e,t){e.idProcessing=e.idProcessing.filter((function(e){return e!==t}))},setProducts:function(e,t){e.likesProducts=t}},actions:{add:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,c,s,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.rootGetters,a=t.getters,o=t.commit,c=t.dispatch,a.inProcessing(r)){e.next=19;break}if(o("pushProcessing",r),a.has(r)||null===r&&void 0===r){e.next=17;break}if(!n["user/isLogin"]){e.next=13;break}return e.next=7,Ge.add(r);case 7:s=e.sent,i=s.ok,u=s.body,u&&i?o("add",r):c("alerts/add",{text:"Ошибка при добавлении товара в избранное. Повторите попытку",type:"error",critical:!1},{root:!0}),e.next=15;break;case 13:o("add",r),localStorage.setItem("likes",JSON.stringify(a.likes));case 15:e.next=18;break;case 17:!a.has(r)||null===r&&void 0===r||(o("popProcessing",r),c("remove",r));case 18:o("popProcessing",r);case 19:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),remove:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,c,s,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.commit,a=t.rootGetters,o=t.getters,c=t.dispatch,o.inProcessing(r)){e.next=16;break}if(n("pushProcessing",r),!o.has(r)||null===r&&void 0===r){e.next=15;break}if(!a["user/isLogin"]){e.next=13;break}return e.next=7,Ge.remove(r);case 7:s=e.sent,i=s.ok,u=s.body,u&&i?n("remove",r):c("alerts/add",{text:"Ошибка при удалении товара из избранных. Повторите попытку",type:"error",critical:!1},{root:!0}),e.next=15;break;case 13:n("remove",r),localStorage.setItem("likes",JSON.stringify(o.likes));case 15:n("popProcessing",r);case 16:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),load:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,o,c,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,Ae=new Promise((function(e){Be=e})),e.next=4,Ge.load();case 4:n=e.sent,a=n.ok,o=n.body,c=n.status,s=n.serverMessege,console.log({ok:a,body:o,status:c,serverMessege:s}),a&&(i=[],o.forEach((function(e){delete Object.assign(e,{id:e.product_id}).product_id,i.push(e.id)})),r("replaceData",i)),Be();case 12:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),replaceData:function(e,t){var r=e.commit,n=e.rootGetters;console.log("Замена избранных на ",t),console.log(n),r("replaceData",t)},installStorageLikes:function(e){var t,r=e.dispatch,n=e.rootGetters;!n["user/isLogin"]&&null!==(t=JSON.parse(localStorage.getItem("likes")))&&void 0!==t&&t.length&&r("replaceData",JSON.parse(localStorage.getItem("likes")))},getLikesProducts:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,n=t.dispatch,a=t.getters,e.next=3,a.readyLoad;case 3:return console.log("111111111111",a.likesId),e.next=6,n("product/getByProductsId",{param:a.likesId},{root:!0});case 6:o=e.sent,console.log(),o&&r("setProducts",o);case 9:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),pushProcessing:function(e,t){e.idProcessing.push(t)},popProcessing:function(e,t){e.idProcessing=e.idProcessing.filter((function(e){return e!==t}))}}},tt=0,rt={namespaced:!0,state:{messages:[]},getters:{messages:function(e){return e.messages}},mutations:{add:function(e,t){e.messages.push(t)},remove:function(e,t){e.messages=e.messages.filter((function(e){return e.id!==t}))}},actions:{add:function(e,t){var r=e.commit,n=t.text,a=t.critical,o=t.type;console.log(n,a,o);var c=++tt;r("add",{id:c,text:n,type:o}),a||setTimeout((function(){r("remove",c)}),3e3)}}},nt=!1,at={namespaced:!0,state:{user:null,loginHistory:[],ordersHistory:[]},getters:{readyAuth:function(){return Te},isLogin:function(e){return null!=e.user},loginHistory:function(e){return e.loginHistory},ordersHistory:function(e){return e.ordersHistory}},mutations:{auth:function(e,t){e.user=t},setLoginHistory:function(e,t){e.loginHistory=t},setLikesProducts:function(e,t){t&&(e.likesProducts=t)},setOrdersHistory:function(e,t){t&&(e.ordersHistory=t)}},actions:{auth:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,o,c,s,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,n=t.dispatch,Te=new Promise((function(e){Ne=e})),console.log("Storage auth!"),e.next=5,ze.auth();case 5:a=e.sent,o=a.ok,c=a.body,s=a.status,i=a.payload,u=a.serverMessege,console.log(o,c,s,i,u),o?(r("auth",i),console.log("Авторизован"),n("userDataLoad")):(r("auth",null),console.log("Не авторизован"),n("logout")),console.log("END Storage auth!"),Ne();case 15:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),registration:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,c,s,i,u,d,l,g,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,a=t.dispatch,o=r.userData,c=r.critical,s=r.messege,console.log(d),e.next=5,ze.signUp(o);case 5:if(i=e.sent,u=i.ok,d=i.body,l=i.payload,g=i.status,p=i.serverMessege,!u){e.next=18;break}return n("auth",l),a("alerts/add",{text:"Вы зарегистрированы",type:"info",critical:!1},{root:!0}),a("userDataLoad"),e.abrupt("return",!0);case 18:if("NoConnect"!==g){e.next=24;break}return console.log(d),a("alerts/add",{text:s+p,type:"error",critical:c},{root:!0}),e.abrupt("return",!1);case 24:return a("alerts/add",{text:d.messege,type:"error",critical:c},{root:!0}),e.abrupt("return",!1);case 26:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),login:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,c,s,i,u,d,l,g,p,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,a=t.dispatch,o=r.userData,c=r.critical,s=r.messege,e.next=4,ze.signIn(o);case 4:if(i=e.sent,u=i.ok,d=i.body,l=i.payload,g=i.status,p=i.serverMessege,console.log(c,s),!u){e.next=19;break}return console.log(d),n("auth",l),a("alerts/add",{text:"Вы авторизованы",type:"info",critical:!1},{root:!0}),a("userDataLoad"),e.abrupt("return",!0);case 19:if("NoConnect"!==g){e.next=25;break}return console.log(d),a("alerts/add",{text:p.messege,type:"error",critical:c},{root:!0}),e.abrupt("return",!1);case 25:return console.log(d),f=d.messege,a("alerts/add",{text:s+p,type:"error",critical:c},{root:!0}),a("alerts/add",{text:f,type:"error",critical:c},{root:!0}),e.abrupt("return",!1);case 30:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),logout:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,n=t.dispatch,console.log("logout"),nt){e.next=22;break}return nt=!0,e.next=6,ze.logout();case 6:if(a=e.sent,o=a.body,c=a.status,!o||!c){e.next=19;break}return r("auth",null),n("cart/installStorageCart",{},{root:!0}),n("like/installStorageLikes",{},{root:!0}),r("setLoginHistory",[]),r("setOrdersHistory",[]),nt=!1,e.abrupt("return",!0);case 19:return n("alerts/add",{text:"Выход не осуществлён. Повторите попытку.",type:"error",critical:!1},{root:!0}),nt=!1,e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),userDataLoad:function(e){var t=e.dispatch;console.log("UserDataLoad"),t("cart/load",{},{root:!0}),t("like/load",{},{root:!0})},changeUser:function(e,t){var r=e.commit;r("auth",t)},getLoginHistory:function(e){return Object(ee["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,ze.getLoginHistory();case 3:n=t.sent,a=n.body,r("setLoginHistory",a);case 6:case"end":return t.stop()}}),t)})))()},getOrderHistory:function(e){return Object(ee["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,ze.getOrders();case 3:n=t.sent,a=n.body,r("setOrdersHistory",a);case 6:case"end":return t.stop()}}),t)})))()}}},ot=Object(s["a"])({modules:{news:qe,product:Ve,category:Ke,anyParams:$e,filter:Ye,cart:Ze,like:et,alerts:rt,user:at},strict:!1}),ct=(r("3ca3"),r("ddb0"),r("6c02")),st=function(){return Promise.all([r.e("chunk-58c87ecf"),r.e("chunk-2cbb8e3e")]).then(r.bind(null,"cd56"))},it=function(){return r.e("chunk-7eb6fefa").then(r.bind(null,"247d"))},ut=function(){return r.e("chunk-451c425b").then(r.bind(null,"b789"))},dt=function(){return r.e("chunk-aa651ef2").then(r.bind(null,"3b42"))},lt=function(){return r.e("chunk-2d224b11").then(r.bind(null,"e0e5"))},gt=function(){return r.e("chunk-1abc2cbf").then(r.bind(null,"fad7"))},pt=function(){return r.e("chunk-77750fe2").then(r.bind(null,"53aa"))},ft=function(){return Promise.all([r.e("chunk-58c87ecf"),r.e("chunk-52cc35c2")]).then(r.bind(null,"d2f1"))},ht=function(){return r.e("chunk-3d1381e6").then(r.bind(null,"a55b"))},mt=function(){return r.e("chunk-7733ba60").then(r.bind(null,"3fd1"))},bt=function(){return r.e("chunk-4a94bde6").then(r.bind(null,"76a1"))},vt=function(){return r.e("chunk-7a04faaf").then(r.bind(null,"c3c6"))},yt=[{name:"main",path:"/",component:st},{name:"catalog",path:"/catalog",component:it},{name:"category",path:"/catalog/category/:category",component:it},{name:"tag",path:"/catalog/tag/:tag",component:it},{name:"likes",path:"/catalog/likes/:likes",component:it,meta:{auth:!0}},{name:"pay",path:"/pay",component:bt},{name:"search",path:"/search/:search",component:it,beforeEnter:function(e,t,r){""!==e.params.search.trim()?(ot.dispatch("filter/setSearch",e.params.search.trim()),ot.dispatch("filter/goSearch",e.params.search.trim()),r()):t()}},{name:"product",path:"/catalog/:id",component:ft},{name:"cart",path:"/cart",component:ut},{name:"login",path:"/login",component:ht,meta:{auth:!1,noSSR:!0}},{name:"registration",path:"/registration",component:mt,meta:{auth:!1,noSSR:!0}},{path:"/profile",component:dt,meta:{auth:!0},children:[{name:"profile-info",path:"",component:lt},{name:"profile-orders",path:"orders",component:gt},{name:"login-history",path:"loginHistory",component:pt}]},{name:"E404",path:"/:pathMatch(.*)",component:vt,meta:{is404:!0}}],kt=Object(ct["a"])({history:Object(ct["b"])(),routes:yt,scrollBehavior:function(){document.getElementById("app").scrollIntoView()}});kt.beforeEach(function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.meta.auth){e.next=6;break}return e.next=3,ot.getters["user/readyAuth"];case 3:ot.getters["user/isLogin"]?n():n({name:"login"}),e.next=13;break;case 6:if(!1!==t.meta.auth){e.next=12;break}return e.next=9,ot.getters["user/readyAuth"];case 9:ot.getters["user/isLogin"]?n({name:"main"}):n(),e.next=13;break;case 12:n();case 13:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}());var Ot=kt,jt=r("2058"),xt=Object(n["d"])(Z).use(ot).use(Ot).use(jt["a"],{loading:"",error:""});ot.dispatch("user/auth"),ot.dispatch("cart/load"),ot.dispatch("category/getCategories",{critical:!0}).then((function(){ot.dispatch("news/getNews",{critical:!1}),ot.dispatch("product/getByTagName",{critical:!1,param:"Хит продаж"}),ot.dispatch("product/getByTagName",{critical:!1,param:"Новинка"}),xt.mount("#app")}))},"63ae":function(e,t,r){"use strict";r("b1fa")},"78a7":function(e,t,r){},"84a7":function(e,t,r){"use strict";var n=r("7a23"),a={class:"navigation__wrapper"},o={class:"navigation__content text2"},c={class:"navigation__menu nav-menu"},s=Object(n["j"])(" Аккаунт"),i=Object(n["j"])(" Корзина"),u={class:"navigation__menu nav-menu"};function d(e,t,r,d,l,g){var p=Object(n["H"])("router-link"),f=Object(n["H"])("spoiler");return Object(n["z"])(),Object(n["g"])("nav",{class:Object(n["q"])(["navigation",{active:e.burgerIsActive}]),style:Object(n["r"])({paddingBottom:e.headerHeight+"px"})},[Object(n["h"])("div",a,[Object(n["h"])("div",o,[Object(n["h"])("ul",c,[Object(n["h"])("li",{onClick:t[0]||(t[0]=function(){return e.toggleBurger&&e.toggleBurger.apply(e,arguments)}),class:"nav-menu__link"},[Object(n["k"])(p,{class:"icon-font__profile",to:{name:"profile-info"}},{default:Object(n["Q"])((function(){return[s]})),_:1})]),Object(n["h"])("li",{onClick:t[1]||(t[1]=function(){return e.toggleBurger&&e.toggleBurger.apply(e,arguments)}),class:"nav-menu__link"},[Object(n["k"])(p,{class:"icon-font__cart",to:{name:"cart"}},{default:Object(n["Q"])((function(){return[i]})),_:1})]),(Object(n["z"])(!0),Object(n["g"])(n["a"],null,Object(n["F"])(g.navCategory,(function(r){return Object(n["z"])(),Object(n["g"])("li",{onClick:t[2]||(t[2]=function(){return e.toggleBurger&&e.toggleBurger.apply(e,arguments)}),key:r.id,class:"nav-menu__link"},[Object(n["k"])(p,{to:{name:"category",params:{category:r.category_name}}},{default:Object(n["Q"])((function(){return[Object(n["j"])(Object(n["L"])(r.category_name),1)]})),_:2},1032,["to"])])})),128))]),Object(n["k"])(f,{title:"Все категории...",titleClass:"nav-menu__link"},{default:Object(n["Q"])((function(){return[Object(n["h"])("ul",u,[(Object(n["z"])(!0),Object(n["g"])(n["a"],null,Object(n["F"])(e.categories,(function(r){return Object(n["z"])(),Object(n["g"])("li",{"nav-menu__link":"",key:r.id,class:"nav-menu__link anim-spoiler",onClick:t[3]||(t[3]=function(){return e.toggleBurger&&e.toggleBurger.apply(e,arguments)})},[Object(n["k"])(p,{to:{name:"category",params:{category:r.category_name}}},{default:Object(n["Q"])((function(){return[Object(n["j"])(Object(n["L"])(r.category_name),1)]})),_:2},1032,["to"])])})),128))])]})),_:1},8,["title"])]),Object(n["h"])("div",{onClick:t[4]||(t[4]=function(){return e.toggleBurger&&e.toggleBurger.apply(e,arguments)}),class:"navigation__close-area"})])],6)}var l=r("4c72"),g=(r("2110"),r("6b0d")),p=r.n(g);const f=p()(l["a"],[["render",d]]);t["a"]=f},afd7:function(e,t,r){},b1fa:function(e,t,r){},bb7e:function(e,t,r){"use strict";var n=r("7a23");function a(e,t,r,a,o,c){return Object(n["z"])(),Object(n["g"])(n["a"],null,[Object(n["h"])("div",{onClick:t[0]||(t[0]=function(){return c.toggleSpoiler&&c.toggleSpoiler.apply(c,arguments)}),class:Object(n["q"])([[{isOpen:o.isActive&&!r.additional},r.titleClass],"spoiler__button"])},Object(n["L"])(r.title),3),Object(n["k"])(n["b"],{name:"spoiler"},{default:Object(n["Q"])((function(){return[o.isActive||r.additional?Object(n["G"])(e.$slots,"default",{key:0,class:"spoiler__content"}):Object(n["f"])("",!0)]})),_:3})],64)}var o={props:{title:{default:""},titleClass:{default:""},additional:{default:!1}},data:function(){return{isActive:!1}},methods:{toggleSpoiler:function(){this.isActive=!this.isActive}},mounted:function(){}},c=(r("bc98"),r("6b0d")),s=r.n(c);const i=s()(o,[["render",a]]);t["a"]=i},bc98:function(e,t,r){"use strict";r("09ce")},d542:function(e,t,r){"use strict";(function(e){var n=r("5530"),a=r("1f6c"),o=r("5551"),c=r("84a7"),s=r("5502"),i=r("e4f5");t["a"]={name:"FlowerHeader",components:{Burger:a["a"],Search:o["a"],Navigation:c["a"]},data:function(){return{headerNode:{}}},methods:Object(n["a"])({},Object(s["b"])("anyParams",{toggleBurger:"toggleBurger",toggleSearch:"toggleSearch",changeHeaderHeight:"changeHeaderHeight"})),computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(s["c"])("cart",{cart:"productsInfo"})),Object(s["c"])("anyParams",{headerHeight:"headerHeight",headerIsFixed:"headerIsFixed"})),{},{isFixed:function(){return this.headerIsFixed?"fixed":"static"}}),mounted:function(){var t=this;
//! Если header fixed ============================================
this.headerIsFixed&&e.isClient&&(this.headerNode=this.$refs.header,this.changeHeaderHeight(this.headerNode.clientHeight),new i["a"](this.headerNode,(function(){t.changeHeaderHeight(t.headerNode.clientHeight)})));//!================================================================
},beforeUnmount:function(){//! toDo в mounted объявлен resize, его надо в глобальную область видимости и отключать тут:
}}}).call(this,r("4362"))},d87c:function(e,t,r){"use strict";r("569e")},e4f5:function(e,t,r){"use strict";function n(e,t){var r=parseInt(getComputedStyle(e));isNaN(r)&&(r=0),r--;var n=document.createElement("div");n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.style.right="0px",n.style.bottom="0px",n.style.overflow="hidden",n.style.zIndex=r,n.style.visibility="hidden";var a=document.createElement("div");a.style.position="absolute",a.style.left="0px",a.style.top="0px",a.style.width="10000000px",a.style.height="10000000px",n.appendChild(a);var o=document.createElement("div");o.style.position="absolute",o.style.left="0px",o.style.top="0px",o.style.right="0px",o.style.bottom="0px",o.style.overflow="hidden",o.style.zIndex=r,o.style.visibility="hidden";var c=document.createElement("div");function s(){n.scrollLeft=1e7,n.scrollTop=1e7,o.scrollLeft=1e7,o.scrollTop=1e7}c.style.position="absolute",c.style.left="0px",c.style.top="0px",c.style.width="200%",c.style.height="200%",o.appendChild(c),e.appendChild(n),e.appendChild(o),s();var i=e.getBoundingClientRect(),u=i.width,d=i.height,l=function(){var r=e.getBoundingClientRect(),n=r.width,a=r.height;n==u&&a==d||(u=n,d=a,t()),s()};n.addEventListener("scroll",l),o.addEventListener("scroll",l)}r.d(t,"a",(function(){return n}))},e4fa:function(e,t,r){},f0fe:function(e,t,r){}});